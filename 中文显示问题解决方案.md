# 中文显示问题解决方案

如果剪贴板监听器出现中文乱码，请按照以下步骤解决：

## 方案一：系统级 UTF-8 支持（推荐）

### Windows 10/11 用户：

1. **启用系统 UTF-8 支持**：
   - 打开"设置" → "时间和语言" → "语言"
   - 点击"管理语言设置"
   - 点击"更改系统区域设置"
   - 勾选"Beta 版：使用 Unicode UTF-8 提供全球语言支持"
   - 重启计算机

2. **设置区域格式**：
   - 确保系统区域设置为"中文(简体，中国)"
   - 在"管理"选项卡中，点击"更改系统区域设置"
   - 选择"中文(简体，中国)"

## 方案二：应用程序兼容性设置

1. **右键点击** `clipboard-monitor.exe`
2. 选择 **"属性"**
3. 切换到 **"兼容性"** 选项卡
4. 勾选以下选项：
   - "以兼容模式运行这个程序" → 选择 "Windows 10"
   - "替代高 DPI 缩放行为" → 选择 "应用程序"
5. 点击 **"确定"**

## 方案三：注册表修改（高级用户）

⚠️ **警告**：修改注册表有风险，请先备份注册表！

1. 按 `Win + R`，输入 `regedit`
2. 导航到：`HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Nls\CodePage`
3. 将以下值修改为：
   - `ACP` = `65001`
   - `OEMCP` = `65001`
4. 重启计算机

## 方案四：使用批处理脚本启动

创建一个 `启动剪贴板监听器.bat` 文件：

```batch
@echo off
chcp 65001 >nul
set LANG=zh_CN.UTF-8
set LC_ALL=zh_CN.UTF-8
clipboard-monitor.exe
```

## 方案五：重新构建（开发者）

如果你有 Go 开发环境，可以重新构建：

```bash
# 使用提供的构建脚本
build-windows.bat

# 或手动构建
set GOOS=windows
set GOARCH=amd64
set CGO_ENABLED=1
go build -ldflags="-s -w -H windowsgui" -o clipboard-monitor.exe .
```

## 验证解决方案

启动程序后，检查以下内容是否正确显示：
- 窗口标题："剪贴板监听器"
- 按钮文字："清空历史"、"刷新"、"关于"
- 状态信息："状态: 正在监听剪贴板..."

## 常见问题

**Q: 为什么会出现中文乱码？**
A: 主要原因是 Windows 系统默认使用 GBK/GB2312 编码，而程序使用 UTF-8 编码。

**Q: 哪种方案最有效？**
A: 方案一（系统级 UTF-8 支持）是最彻底的解决方案，建议优先尝试。

**Q: 修改后需要重启吗？**
A: 方案一和方案三需要重启系统，其他方案不需要。

**Q: 会影响其他程序吗？**
A: 启用系统 UTF-8 支持通常不会影响其他程序，反而能提高兼容性。

## 技术说明

程序已经内置了以下中文支持措施：
- Windows API 调用设置控制台编码为 UTF-8
- 环境变量设置（LANG, LC_ALL）
- 编译时添加 Windows GUI 标志
- 平台特定的编码初始化

如果问题仍然存在，请提交 Issue 并提供：
- Windows 版本
- 系统语言设置
- 具体的乱码截图
